import 'library.svgt'

def next_grid_cell()
{
  if(turtle.x == 260)
    m -250 100
  else
    j 250
}

def curve(start_dir body())
{
  push
  d start_dir
  stamp arrow
  body
  stamp arrow
  pop

  next_grid_cell
}

M 10 50

curve 45
{
  c 50 40 50 -40 100 0
  s 70 -70 100 0
}

curve 45
{
  c 50 40 50 -40 100 0
  s 70 -70 100 0
}

curve 45
{
  q 100 0 -30
  d 0 t 50
  d 0 t 50
}

curve 45
{
  q 100 0 -90
  d 0 t 50
  d 0 t 50
}

def curve_opt(do_push_move do_push_draw)
{
  curve 45
  {
    q 100 0 -90
    if do_push_move { push j 20 pop }
    if do_push_draw { push f 20 pop }
    d 0 t 10
    d 0 t 10
  }
}

curve_opt 0 0
curve_opt 1 0
curve_opt 0 1
curve_opt 1 1

curve 45
{
  q 100 0 -90
  d 0 t 100
  d 0 t 75
}

## stdout
M 10 50 L 27.68 67.68 Z M 27.68 67.68 L 17.68 67.68 Z M 27.68 67.68 L 27.68 57.68 Z M 27.68 57.68 Z M 10 50 C 48.3 82.14 71.7 82.14 110 50 S 186.06 115.78 210 50 M 210 50 L 218.55 26.51 Z M 218.55 26.51 L 222.78 35.57 Z M 218.55 26.51 L 209.49 30.73 Z M 209.49 30.73 Z M 260 50 L 277.68 67.68 Z M 277.68 67.68 L 267.68 67.68 Z M 277.68 67.68 L 277.68 57.68 Z M 277.68 57.68 Z M 260 50 C 298.3 82.14 321.7 82.14 360 50 S 436.06 115.78 460 50 M 460 50 L 468.55 26.51 Z M 468.55 26.51 L 472.78 35.57 Z M 468.55 26.51 L 459.49 30.73 Z M 459.49 30.73 Z M 10 150 L 27.68 167.68 Z M 27.68 167.68 L 17.68 167.68 Z M 27.68 167.68 L 27.68 157.68 Z M 27.68 157.68 Z M 10 150 Q 46.6 186.6 110 150 T 160 150 T 210 150 M 210 150 L 231.65 137.5 Z M 231.65 137.5 L 229.06 147.16 Z M 231.65 137.5 L 221.99 134.91 Z M 221.99 134.91 Z M 260 150 L 277.68 167.68 Z M 277.68 167.68 L 267.68 167.68 Z M 277.68 167.68 L 277.68 157.68 Z M 277.68 157.68 Z M 260 150 Q 360 250 360 150 T 410 150 T 460 150 M 460 150 L 460 125 Z M 460 125 L 467.07 132.07 Z M 460 125 L 452.93 132.07 Z M 452.93 132.07 Z M 10 250 L 27.68 267.68 Z M 27.68 267.68 L 17.68 267.68 Z M 27.68 267.68 L 27.68 257.68 Z M 27.68 257.68 Z M 10 250 Q 110 350 110 250 T 120 250 T 130 250 M 130 250 L 130 225 Z M 130 225 L 137.07 232.07 Z M 130 225 L 122.93 232.07 Z M 122.93 232.07 Z M 260 250 L 277.68 267.68 Z M 277.68 267.68 L 267.68 267.68 Z M 277.68 267.68 L 277.68 257.68 Z M 277.68 257.68 Z M 260 250 Q 360 350 360 250 T 370 250 T 380 250 M 380 250 L 380 225 Z M 380 225 L 387.07 232.07 Z M 380 225 L 372.93 232.07 Z M 372.93 232.07 Z M 10 350 L 27.68 367.68 Z M 27.68 367.68 L 17.68 367.68 Z M 27.68 367.68 L 27.68 357.68 Z M 27.68 357.68 Z M 10 350 Q 110 450 110 350 L 110 330 M 110 350 T 120 350 T 130 350 M 130 350 L 155 350 Z M 155 350 L 147.93 357.07 Z M 155 350 L 147.93 342.93 Z M 147.93 342.93 Z M 260 350 L 277.68 367.68 Z M 277.68 367.68 L 267.68 367.68 Z M 277.68 367.68 L 277.68 357.68 Z M 277.68 357.68 Z M 260 350 Q 360 450 360 350 L 360 330 M 360 350 T 370 350 T 380 350 M 380 350 L 405 350 Z M 405 350 L 397.93 357.07 Z M 405 350 L 397.93 342.93 Z M 397.93 342.93 Z M 10 450 L 27.68 467.68 Z M 27.68 467.68 L 17.68 467.68 Z M 27.68 467.68 L 27.68 457.68 Z M 27.68 457.68 Z M 10 450 Q 110 550 110 450 T 210 450 T 285 450 M 285 450 L 278.94 425.75 Z M 278.94 425.75 L 287.51 430.89 Z M 278.94 425.75 L 273.79 434.32 Z M 273.79 434.32 Z 
